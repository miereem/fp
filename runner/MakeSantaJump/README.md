# Лабораторная работа №4

Выполнила: Абдурасул кызы Мээрим, P34092

## Задание

Цель: получить навыки работы со специфичными для выбранной технологии/языка программирования приёмами.
Вариант лабораторной работы назначается в зависимости от выбранной технологии. Вы можете предложить свой вариант задания, в том числе и групповой.

Общие требования:

- программа должна быть реализована в функциональном стиле;
- требуется использовать идиоматичный для технологии стиль программирования;
- задание и коллектив должны быть согласованы;
- допустима совместная работа над одним заданием.

## Реализация

Простая игра "Make Santa Jump", написанная на F# с использованием фреймворка MonoGame. В игре реализованы следующие ключевые элементы:

#### Использованные технологии:

MonoGame: Кроссплатформенный фреймворк для работы с графикой, звуком и вводом.

Sprite Sheets: Для анимации Санты используется спрайт-лист, где каждый кадр анимации хранится в одном изображении.

Pixel-Perfect Collision Detection: Для точного определения столкновений используется проверка на уровне пикселей.

### Процесс разработки:

1) Разработка класса Santa, который отвечает за управление персонажем.

2) Определение основных параметров: позицию (x, y), скорость (dy), состояние прыжка (isJumping) и анимацию.

3) Для анимации использовался спрайт-лист (Santa.png), где каждый кадр представляет собой отдельную фазу бега или прыжка Санты.

4) Логика прыжка с простой физикой (гравитация и ускорение).

### Анимация Санты:
- Разделила спрайт-лист на кадры, используя параметры `spriteWidth` и `numSprites`.
- Создала таймер (`spriteTimer`) для переключения между кадрами с заданной частотой (`spriteChangeTime`).
- Реализовала цикличность анимации с помощью функции `wrap`, чтобы кадры повторялись.

### Генерация препятствий:
- Разработала класс `Obstacle`, который отвечает за создание и движение препятствий.
- Препятствия генерируются случайным образом с заданными параметрами (ширина, высота, позиция).
- Добавила логику удаления препятствий, когда они выходят за пределы экрана.

### Дорожки и управление:
- Создала класс `Track`, который объединяет Санту и препятствия на одной дорожке.
- Каждая дорожка имеет свой цвет, границы и управляющую клавишу.
- Реализовала систему управления, где каждая клавиша (`A`, `S`, `D`, `F`, `Space`) отвечает за прыжок Санты на соответствующей дорожке.

### Коллизии:
- Добавила проверку столкновений между Сантой и препятствиями.
- Использовала два этапа проверки: сначала bounding box (прямоугольники), затем пиксельную проверку для точности.
- Для пиксельной проверки использовала данные из `textureData`, чтобы определить, пересекаются ли непрозрачные пиксели.

### Состояния игры:
- Реализовала систему состояний игры (`GameState`): главное меню, игра, пауза, завершение.
- В главном меню игрок выбирает уровень сложности (количество дорожек).
- В игре обрабатываются ввод, обновление и отрисовка.
- При столкновении игра переходит в состояние "Game Over".

### Рендеринг:
- Использовала `SpriteBatch` для отрисовки фона, препятствий, Санты и текста.
- Добавила отображение счета (количество пройденных препятствий) и сообщений (например, "Game Over").

### Тестирование и балансировка:
- Настроила параметры игры (гравитация, скорость препятствий, размеры) для комфортного геймплея.
- Протестировала анимацию, коллизии и генерацию препятствий на разных уровнях сложности.

---

### Итог
Игра была создана, начиная с проектирования персонажа и анимации, затем добавления препятствий, дорожек и управления, и заканчивая системой состояний и рендерингом. Использование F# и MonoGame позволило создать структурированный и легко расширяемый код.

Этот проект демонстрирует базовые принципы разработки игр: работу с графикой, анимацией, физикой, коллизиями и управлением состоянием. Код написан в функциональном стиле с использованием модулей и типов, что делает его структурированным и легко расширяемым.